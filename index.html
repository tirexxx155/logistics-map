<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Карта заявок</title>

    <!-- Стили Leaflet -->
    <link
      rel="stylesheet"
      href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
    />

    <!-- Наши стили -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Карта заявок</h1>
        <p>Прототип: точки с грузами и тарифами</p>

        <div class="filters">
            <label>
                Груз:
                <select id="cargoFilter">
                    <option value="">Все</option>
                    <option value="Кукуруза">Кукуруза</option>
                    <option value="Пшеница">Пшеница</option>
                    <option value="Подсолнечник">Подсолнечник</option>
                </select>
            </label>

            <label>
                Мин. цена, ₽/т:
                <input type="number" id="minPrice" placeholder="0">
            </label>

            <button id="applyFilter">Применить фильтр</button>
            <button id="resetFilter">Сбросить</button>

            <div class="panel-toggles">
                <button id="toggleSidebar">Свернуть список заявок</button>
                <button id="toggleForm">Свернуть форму</button>
                <button id="downloadCsvBtn">Скачать для Excel (CSV)</button>
            </div>
        </div>

        <div class="add-order">
            <h2>Добавить заявку</h2>
            <form id="addOrderForm">
                <div class="form-row">
                    <label>
                        Откуда:
                        <input type="text" id="fromInput" required>
                    </label>
                    <label>
                        Куда:
                        <input type="text" id="toInput" required>
                    </label>
                    <label>
                        Груз:
                        <select id="cargoInput" required>
                            <option value="">Выберите...</option>
                            <option value="Кукуруза">Кукуруза</option>
                            <option value="Пшеница">Пшеница</option>
                            <option value="Подсолнечник">Подсолнечник</option>
                        </select>
                    </label>
                </div>

                <div class="form-row">
                    <label>
                        Цена, ₽/т:
                        <input type="number" id="priceInput" required>
                    </label>
                    <label>
                        Расстояние, км:
                        <input type="number" id="distanceInput">
                    </label>
                    <label>
                        Координаты (клик по карте):
                            <div class="coords">
                                <input type="text" id="latInput" placeholder="Широта" readonly>
                                <input type="text" id="lonInput" placeholder="Долгота" readonly>
                            </div>
                    </label>
                </div>

                <button type="submit">Добавить на карту</button>
            </form>
            <p class="hint">Кликните по карте, чтобы подставить координаты точки.</p>
        </div>
    </header>

    <div id="layout">
        <aside id="sidebar">
            <h2>Список заявок</h2>
            <table id="ordersTable">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Груз</th>
                        <th>Цена, ₽/т</th>
                        <th>Откуда</th>
                        <th>Куда</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- строки заполняются из JS -->
                </tbody>
            </table>
        </aside>

        <div id="map"></div>
    </div>

    <!-- Модальное окно редактирования -->
    <div id="editModal" class="modal hidden">
        <div class="modal-backdrop"></div>
        <div class="modal-content">
            <h2>Редактировать заявку</h2>
            <form id="editOrderForm">
                <div class="form-row">
                    <label>
                        Откуда:
                        <input type="text" id="editFromInput" required>
                    </label>
                    <label>
                        Куда:
                        <input type="text" id="editToInput" required>
                    </label>
                </div>
                <div class="form-row">
                    <label>
                        Груз:
                        <select id="editCargoInput" required>
                            <option value="">Выберите...</option>
                            <option value="Кукуруза">Кукуруза</option>
                            <option value="Пшеница">Пшеница</option>
                            <option value="Подсолнечник">Подсолнечник</option>
                        </select>
                    </label>
                    <label>
                        Цена, ₽/т:
                        <input type="number" id="editPriceInput" required>
                    </label>
                </div>
                <div class="form-row">
                    <label>
                        Расстояние, км:
                        <input type="number" id="editDistanceInput">
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" id="editCancelBtn">Отмена</button>
                    <button type="submit">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Скрипт Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Наш JS -->
    <script src="main.js"></script>
</body>
</html>
